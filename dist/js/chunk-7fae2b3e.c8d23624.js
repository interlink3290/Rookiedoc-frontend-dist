(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fae2b3e"],{"06c4":function(e,t,i){},1344:function(e,t,i){"use strict";var n=i("06c4"),o=i.n(n);o.a},b05d:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"docedit",staticStyle:{width:"900px",margin:"220px auto","text-align":"center"}},[[i("div",[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"标题","sub-title":"修改时间"},on:{back:function(t){return e.toIndex()}}},[i("template",{slot:"extra"},[i("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","active-text-color":"none"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"1"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.fav,callback:function(t){e.fav=t},expression:"fav"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),i("el-menu-item",{attrs:{index:"1"}},[i("a-button",{on:{click:e.collect}},[e._v("收藏")])],1),i("el-menu-item",{staticClass:"nav",attrs:{index:"2"}},[[i("div",[i("a-button",{on:{click:e.showModal}},[e._v("分享")]),i("a-modal",{staticStyle:{"z-index":"10010"},attrs:{title:"分享文件","ok-text":"确认","cancel-text":"取消"},on:{ok:e.hideModal},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("a-input-search",{attrs:{size:"large",placeholder:e.documentlinks,disabled:""}},[i("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.documentlinks,expression:"documentlinks",arg:"copy"}],attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 复制链接 ")])],1)],1),i("br"),i("br"),i("a-button",{on:{click:e.confirm}},[e._v("Confirm")])],1)]],2),i("el-menu-item",{staticClass:"nav",attrs:{index:"3"}},[e._v(" 消息中心 "),i("i",{staticClass:"el-icon-s-promotion"})]),i("el-submenu",{staticClass:"nav",attrs:{index:"4"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-user"}),e._v("个人中心 ")]),i("el-menu-item",{attrs:{index:"2-1"},on:{click:e.toPmsg}},[e._v("个人主页")]),i("el-menu-item",{attrs:{index:"2-2"},on:{click:e.signOut}},[e._v("退出登录")])],2)],1)],1)],2)],1)],i("el-form",{ref:"form",staticStyle:{"margin-top":"10px","margin-left":"5px","font-size":"38px"},attrs:{model:e.form,"label-width":"80px"}},[this.isedit?i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),i("el-button",{attrs:{type:"success"},on:{click:e.showDrawer}},[e._v("评论")])],1):e._e(),i("el-form-item",{attrs:{label:"文件名",prop:"docname",rules:[{required:!0,message:"请输入标题",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]}},[i("el-input",{model:{value:e.form.docname,callback:function(t){e.$set(e.form,"docname",t)},expression:"form.docname"}})],1),i("el-form-item",[i("mavon-editor",{ref:"md",staticStyle:{"z-index":"1",border:"1px solid #d9d9d9",height:"85vh"},attrs:{editable:e.showable,placeholder:"请输入文档内容...",boxShadow:!0,toolbars:e.toolbars},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1),[i("div",[i("a-drawer",{attrs:{title:"文档评论",placement:"right",closable:!1,visible:e.visible_drawer,"after-visible-change":e.afterVisibleChange,width:"500"},on:{close:e.onClose}},[[i("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:e.pagination,"data-source":e.comment},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{key:"item.title"},[i("template",{slot:"actions"},[i("span",{key:"comment-basic-like"},[i("a-tooltip",{attrs:{title:"Like"}},[i("a-icon",{attrs:{type:"like",theme:"liked"===e.action?"filled":"outlined"},on:{click:e.like}})],1),i("span",{staticStyle:{"padding-left":"8px",cursor:"auto"}},[e._v(e._s(t.likes))])],1),i("span",{key:"comment-basic-dislike"},[i("a-tooltip",{attrs:{title:"Dislike"}},[i("a-icon",{attrs:{type:"dislike",theme:"disliked"===e.action?"filled":"outlined"},on:{click:e.dislike}})],1),i("span",{staticStyle:{"padding-left":"8px",cursor:"auto"}},[e._v(e._s(t.dislikes))])],1),i("span",{key:"comment-basic-reply-to"},[e._v("Reply to")]),i("span",[e._v(e._s(t.time))])]),i("b",{staticStyle:{"padding-left":"5%"},on:{click:function(i){return e.toUser(t)}}},[e._v(e._s(t.name))]),i("a-list-item-meta",{attrs:{description:t.content}},[i("a-avatar",{attrs:{slot:"avatar",src:t.avatar},on:{click:function(i){return e.toUser(t)}},slot:"avatar"})],1)],2)}}])})],i("a-divider"),this.isedit?i("a-textarea",{attrs:{placeholder:"请输入评论","auto-size":""},model:{value:e.newcontent,callback:function(t){e.newcontent=t},expression:"newcontent"}}):e._e(),i("br"),i("br"),this.isedit?i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.addcomment}},[e._v("提交评论 ")]):e._e()],2)],1)]],2)},o=[],a=(i("b0c0"),i("b85c")),s=i("4ec3"),l={created:function(){var e=JSON.parse(localStorage.getItem("user"));console.log(e.id>0),e.id>0?(this.isLogin=!0,this.getUserInfo(),this.getContent(),this.getComment(),this.setLink()):this.isLogin=!1},methods:{getContent:function(){var e=this,t=JSON.parse(this.$Base64.decode(this.$route.query.key)).id;return console.log(t),Object(s["j"])({id:t}).then((function(t){var i=t.data,n=i.id,o=i.title,a=i.content,s=i.createtime,l=i.changetime,c=i.isdelete,r=i.count,d=i.fav,m=i.uid;console.log(t),console.log(n,o,a,s,l,c,r,m,d),e.docid=n,e.form.docname=o,e.content=a,e.createtime=s,e.changetime=l,e.isdelete=c,e.count=r,e.uid=m,e.fav=d,e.getfav()})),""},getfav:function(){var e=JSON.parse(localStorage.getItem("user"));console.log("test",this.fav,this.isedit),e.id==this.uid||"1"==this.fav?this.isedit=!0:"2"==this.fav?this.isedit=!1:"3"==this.fav&&this.$router.push({path:"/reject"})},getUserInfo:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));Object(s["m"])({id:t.id}).then((function(t){var i=t.data,n=i.id,o=i.username,a=i.email,s=i.password;e.userinfo={id:n,username:o,email:a},e.dataForm.checkPassword=s}))},getComment:function(){var e=this,t=JSON.parse(this.$Base64.decode(this.$route.query.key)).id;console.log(t),Object(s["j"])({id:t}).then((function(t){console.log(t),e.comment=[];var i,n=Object(a["a"])(t.data.comments);try{var o=function(){var t=i.value;console.log(t),Object(s["m"])({id:t.uid}).then((function(i){var n=i.data,o={uid:n.id,name:n.username,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:t.detail,action:null,time:t.com_datetime,likes:0,dislikes:0};console.log(o),e.comment.push(o)}))};for(n.s();!(i=n.n()).done;)o()}catch(l){n.e(l)}finally{n.f()}console.log(e.comment)}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var i=t.$moment().format("YYYY-MM-DDThh:mm:ss"),n={id:t.docid,title:t.form.docname,content:t.content,count:t.count+1,fav:t.fav,changetime:i};Object(s["o"])(n).then((function(e){null!=e?t.$message({message:"保存成功",type:"success"}):alert("保存失败")}))}}))},signOut:function(){localStorage.removeItem("user"),this.$router.push({path:"/login"})},setLink:function(){this.documentlinks="http://localhost:8080/#"+this.$route.path+"?key="+this.$route.query.key},toIndex:function(){this.$router.push({path:"/home"})},toUser:function(e){var t=e.uid;console.log(t),this.$router.push({path:"/pmsg",query:{id:t}})},collect:function(){alert("收藏成功")},addcomment:function(){var e=this,t=this.$moment().format("YYYY-MM-DDThh:mm:ss");this.newcomment.content=this.newcontent,this.newcomment.name=this.userinfo.username,this.newcomment.time=t,this.newcontent="";var i=Object.assign({},JSON.parse(JSON.stringify(this.newcomment)));this.comment.push(i);var n={uid:this.userinfo.id,cid:this.docid,detail:this.newcomment.content,com_datetime:t};Object(s["a"])(n).then((function(t){"success"===t.data.flag?e.$message({message:"评论成功",type:"success"}):e.$message({message:"评论成功",type:"warning"})}))},showModal:function(){this.visible=!0},hideModal:function(){this.visible=!1},like:function(){this.likes++,this.action="liked"},dislike:function(){this.dislikes++,this.action="disliked"},afterVisibleChange:function(e){console.log("visible",e)},showDrawer:function(){this.visible_drawer=!0},onClose:function(){this.visible_drawer=!1},handleSelect:function(){},handleChange:function(){},confirm:function(){},toPmsg:function(){var e=JSON.parse(localStorage.getItem("user")),t=e.id;console.log(t),this.$router.push({path:"/pmsg",query:{id:t}})}},components:{},data:function(){return{visible:!1,visible_drawer:!1,showable:!0,isedit:!1,documentlinks:"",newcontent:"",userinfo:{id:"",username:"",email:""},options:[{value:"1",label:"可编辑"},{value:"2",label:"仅可查看"},{value:"3",label:"不可查看"}],newcomment:{name:"001",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"",action:null,time:"",likes:0,dislikes:0},comment:[],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!1,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},docid:"",form:{docname:""},content:"",createtime:"",changetime:"",isdelete:"",count:"",uid:"",fav:""}}},c=l,r=(i("1344"),i("2877")),d=Object(r["a"])(c,n,o,!1,null,"55915f4a",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-7fae2b3e.c8d23624.js.map