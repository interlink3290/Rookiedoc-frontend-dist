(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b35f2"],{"27a8":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticStyle:{height:"100%",width:"100%",border:"1px"}},[i("el-main",[i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"团队文档",name:"first"}},[i("el-row",e._l(e.Files,(function(t,a){return i("el-col",{key:a,attrs:{span:4},nativeOn:{click:function(i){return e.detail(t)}}},[0==t.isdelete?i("div",[i("el-card",{staticStyle:{"margin-left":"20px"},attrs:{shadow:"hover"}},[i("div",{staticClass:"card-menu",staticStyle:{"text-align":"right"}},[i("el-dropdown",{attrs:{placement:"bottom"}},[i("div",{staticClass:"card-pic"},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-setting el-icon--right"})])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(i){return e.detail(t)}}},[i("i",{staticClass:"el-icon-folder-opened"}),e._v("打开 ")]),i("el-dropdown-item",{nativeOn:{click:function(i){return e.createFavourite(t)}}},[i("i",{staticClass:"el-icon-collection-tag"}),e._v("收藏 ")]),i("el-dropdown-item",{nativeOn:{click:function(i){e.setLink(t),e.linkvisible=!0}}},[i("i",{staticClass:"el-icon-chat-line-round"}),e._v("分享 ")]),1==e.userinfo.fav?i("el-dropdown-item",{nativeOn:{click:function(i){return e.removeFromTeam(t)}}},[i("i",{staticClass:"el-icon-setting"}),e._v("移出团队文档 ")]):e._e(),1==e.userinfo.fav?i("el-dropdown-item",{staticStyle:{color:"red"},nativeOn:{click:function(i){return e.deleteContent(t)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("删除 ")]):e._e()],1)],1)],1),i("div",{staticClass:"card-body"},[i("div",{staticClass:"card-picture"},[i("span",{staticStyle:{"font-size":"40px"}},[i("i",{staticClass:"el-icon-document"})])]),i("div",{staticClass:"card-word"},[i("div",{staticStyle:{"font-size":"20px"}},[e._v(e._s(t.title))]),i("div",{staticStyle:{"font-size":"10px"}},[e._v("创建："+e._s(t.createtime))]),i("div",{staticStyle:{"font-size":"10px"}},[e._v("修改："+e._s(t.changetime))])])])]),[i("a-modal",{staticStyle:{"z-index":"10010"},attrs:{title:"分享文件","ok-text":"确认","cancel-text":"取消"},on:{ok:function(t){e.linkvisible=!1}},model:{value:e.linkvisible,callback:function(t){e.linkvisible=t},expression:"linkvisible"}},[i("a-input-search",{attrs:{size:"large",placeholder:e.documentlinks,disabled:""}},[i("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.documentlinks,expression:"documentlinks",arg:"copy"}],attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 复制链接 ")])],1)],1)]],2):e._e()])})),1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.pageCount}})],1),i("el-tab-pane",{attrs:{label:"团队管理",name:"second"}},[i("div",[i("el-row",[i("span",{staticStyle:{"margin-left":"10px","font-size":"large"}},[e._v("团队id: "+e._s(e.teaminfo.id))]),i("span",{staticStyle:{"margin-left":"10px","font-size":"large"}},[e._v("团队名称: "+e._s(e.teaminfo.teamname))])]),1==e.userinfo.isleader?i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:4}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-button",{attrs:{round:"",type:"primary",plain:"",icon:"el-icon-user"},on:{click:e.open}},[e._v("添加团队成员 ")])],1)]),1==e.userinfo.isleader?i("el-col",{attrs:{span:4}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-button",{attrs:{round:"",type:"danger",plain:""},on:{click:e.dismissTeam}},[e._v("解散团队 ")])],1)]):e._e()],1):e._e(),0==e.userinfo.isleader?i("el-row",{attrs:{gutter:20}},[0==e.userinfo.isleader?i("el-col",{attrs:{span:4}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-button",{attrs:{round:"",type:"danger",plain:""},on:{click:e.exitTeam}},[e._v("退出团队 ")])],1)]):e._e()],1):e._e(),i("div",e._l(e.Member,(function(t,a){return i("div",{key:a},[1==t.isleader?i("div",{staticStyle:{"margin-top":"10px"}},[i("el-row",{staticStyle:{"font-size":"14px",display:"flex","align-items":"center"}},[i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-avatar",{attrs:{size:24}},[e._v("头像")]),i("span",{staticStyle:{"margin-left":"15px"}},[e._v("队长")]),i("span",{staticStyle:{"margin-left":"15px"}},[e._v("用户id： "+e._s(t.uid))]),i("span",{staticStyle:{"margin-left":"15px"},on:{click:function(i){return e.toUser(t)}}},[e._v("用户名： "+e._s(t.username))])],1)])],1)],1):e._e()])})),0),i("div",e._l(e.Member,(function(t,a){return i("div",{key:a},[0==t.isleader?i("div",{staticStyle:{"margin-top":"10px"}},[i("el-row",{staticStyle:{"font-size":"14px",display:"flex","align-items":"center"}},[i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-avatar",{attrs:{size:24}},[e._v("头像")]),i("span",{staticStyle:{"margin-left":"15px"}},[e._v("协作者")]),i("span",{staticStyle:{"margin-left":"15px"}},[e._v("用户id： "+e._s(t.uid))]),i("span",{staticStyle:{"margin-left":"15px"},on:{click:function(i){return e.toUser(t)}}},[e._v("用户名： "+e._s(t.username))])],1)]),i("el-col",{attrs:{span:11}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.fav,callback:function(i){e.$set(t,"fav",i)},expression:"item.fav"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.userinfo.isleader?i("el-col",{attrs:{span:5}},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.memberFavUpdate(t)}}},[e._v("提交修改")]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.deleteTeamMember(t)}}},[e._v("踢出团队")])],1):e._e()],1)],1):e._e()])})),0)],1)])],1)],1)],1)},n=[],s=i("b85c"),o=i("4ec3"),l={inject:["reload"],name:"teamspace",components:{},data:function(){return{isLogin:!1,visible:!1,linkvisible:!1,userinfo:{id:"",username:"",email:"",fav:"",isleader:"",mid:""},teaminfo:{id:"",teamname:""},page:{page:1,page_size:10},options:[{value:"1",label:"可编辑"},{value:"2",label:"不可编辑"}],pageCount:1,Files:[],Member:[],activeIndex:"1",activeName:"first",documentlinks:""}},created:function(){var e=JSON.parse(localStorage.getItem("user"));console.log(e.id>0),e.id>0?(this.isLogin=!0,this.getUserInfo(),this.getTeamInfo(),this.getMemberList()):this.isLogin=!1},watch:{},methods:{toIndex:function(){this.$router.push({path:"/"})},toEditor:function(){this.$router.push({path:"/editor"})},toPmsg:function(){var e=JSON.parse(localStorage.getItem("user")),t=e.id;console.log(t),this.$router.push({path:"/pmsg",query:{id:t}})},toRecent:function(){this.$router.push({path:"/recent"})},toFavour:function(){this.$router.push({path:"/favour"})},toMydoc:function(){this.$router.push({path:"/mydoc"})},toTrash:function(){this.$router.push({path:"/trash"})},toUser:function(e){var t=e.uid;console.log(t),this.$router.push({path:"/pmsg",query:{id:t}})},showModal:function(){this.visible=!0},hideModal:function(){this.visible=!1},getUserInfo:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));Object(o["m"])({id:t.id}).then((function(t){var i=t.data,a=i.id,n=i.username,s=i.email;e.userinfo={id:a,username:n,email:s}}))},handleRightMenuClick:function(){},getTeamInfo:function(){var e=this;console.log(this.$route.query.id),Object(o["l"])({id:this.$route.query.id}).then((function(t){var i=t.data,a=i.id,n=i.teamname,s=i.team_contents;e.teaminfo={id:a,teamname:n},e.Files=s}))},getMemberList:function(){var e=this;Object(o["l"])({id:this.$route.query.id}).then((function(t){e.Member=[];var i,a=Object(s["a"])(t.data.team_peoples);try{var n=function(){var t=i.value;console.log(t),Object(o["m"])({id:t.uid}).then((function(i){var a=i.data,n={uid:a.id,username:a.username,fav:t.fav,isleader:t.isleader,mid:t.id};e.Member.push(n);var s=JSON.parse(localStorage.getItem("user"));t.uid==s.id&&(e.userinfo.fav=t.fav,e.userinfo.isleader=t.isleader,e.userinfo.mid=t.id)}))};for(a.s();!(i=a.n()).done;)n()}catch(l){a.e(l)}finally{a.f()}}))},open:function(){var e=this;this.$prompt("请输入要邀请的成员id","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"输入不能为空",inputValidator:function(e){if(!e)return"输入不能为空"}}).then((function(t){var i=t.value;Object(o["e"])({isleader:0,fav:2,tid:e.teaminfo.id,uid:i}).then((function(t){console.log(t),"success"==t.data.flag?(console.log(t),e.$message({message:"添加成功",type:"success"}),e.reload(),e.activeName="second"):e.$message({message:"添加失败，请确认该用户是否存在",type:"warning"})}))})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},deleteTeamMember:function(e){var t=this;Object(o["i"])({id:e.mid}).then((function(e){console.log(e),t.$message({message:"删除成功",type:"success"}),t.reload()}))},memberFavUpdate:function(e){var t=this,i={id:e.mid,fav:e.fav};Object(o["p"])(i).then((function(e){null!=e?t.$message({message:"更改成功",type:"success"}):t.$message({message:"更改失败",type:"waring"})}))},detail:function(e){var t=e.id;console.log(t),this.$router.push({path:"/doc",query:{key:this.$Base64.encode(JSON.stringify({id:t}))}})},dismissTeam:function(){var e=this;console.log(this.teaminfo.id),Object(o["h"])({id:this.teaminfo.id}).then((function(t){console.log(t),e.$message({message:"队伍解除成功",type:"success"}),e.$router.push({path:"/home"})}))},deleteContent:function(e){var t=this;Object(o["o"])({id:e.id,isdelete:1}).then((function(e){console.log(e),null!=e.data.id&&(t.$message({message:"删除成功",type:"success"}),t.reload())}))},removeFromTeam:function(e){var t=this;Object(o["o"])({id:e.id,tid:null}).then((function(e){console.log(e),null!=e.data.id&&(t.$message({message:"移除成功",type:"success"}),t.reload())}))},exitTeam:function(){var e=this;Object(o["i"])({id:this.userinfo.mid}).then((function(t){console.log(t),e.$message({message:"退出成功",type:"success"}),e.$router.push({path:"/home"}),e.reload()}))},setLink:function(e){var t=e.id;console.log(t),this.documentlinks="http://localhost:8080/#/doc?key="+this.$Base64.encode(JSON.stringify({id:t}))}}},r=l,c=i("2877"),d=Object(c["a"])(r,a,n,!1,null,"513a838a",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b35f2.8622c2c6.js.map